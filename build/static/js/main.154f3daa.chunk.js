(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),r=t(5),u=t(3),i=t(2),a=t(4),s=t.n(a),l={getAll:function(){return s.a.get("/api/persons")},addPerson:function(e){return s.a.post("/api/persons",e)},deletePerson:function(e){return s.a.delete("/api/persons/"+e.id)},updatePerson:function(e){return s.a.put("/api/persons/"+e.id,e)}},d=t(0),f=function(e){return Object(d.jsxs)("form",{onSubmit:e.hb,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:e.hnc})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{onChange:e.hnumc})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){return Object(d.jsxs)("div",{children:["filter shown with",Object(d.jsx)("input",{onChange:e.handleFilterChange})]})},j=function(e){return Object(d.jsx)("div",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(n){return Object(d.jsxs)("p",{children:[n.name," : ",n.number," ",Object(d.jsx)("button",{onClick:function(){return e.deleteFunc(n)},children:"delete"})]},n.name)}))})},h=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"notification",children:n})},m=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"error",children:n})},p=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(i.useState)(""),a=Object(u.a)(c,2),s=a[0],p=a[1],O=Object(i.useState)(""),g=Object(u.a)(O,2),x=g[0],v=g[1],w=Object(i.useState)(""),k=Object(u.a)(w,2),P=k[0],C=k[1],T=Object(i.useState)(null),S=Object(u.a)(T,2),y=S[0],A=S[1],F=Object(i.useState)(null),N=Object(u.a)(F,2),D=N[0],E=N[1];return Object(i.useEffect)((function(){console.log("effect"),l.getAll().then((function(e){console.log("promise fulfilled222"),o(e.data)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{message:y}),Object(d.jsx)(m,{message:D}),Object(d.jsx)(b,{handleFilterChange:function(e){C(e.target.value)}}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(f,{hb:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){var n=t.find((function(e){return e.name===s}));window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&(console.log("confirmed"),"id"in n===!1?l.getAll().then((function(e){l.updatePerson(Object(r.a)(Object(r.a)({},e.data.find((function(e){return e.name===n.name}))),{},{number:x})).then((function(){o(t.filter((function(e){return e.name!==s})).concat({name:s,number:x})),A("'".concat(s,"' has been edited on the phonebook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(typeof e),E(e),setTimeout((function(){E(null)}),5e3)}))})):l.updatePerson(Object(r.a)(Object(r.a)({},n),{},{number:x})).then((function(){o(t.filter((function(e){return e.name!==s})).concat({name:s,number:x})),A("'".concat(s,"' has been edited on the phonebook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(e),console.log(typeof e),E(e),setTimeout((function(){E(null)}),5e3)})))}else l.addPerson({name:s,number:x}).then((function(){o(t.concat({name:s,number:x})),A("'".concat(s,"' has been added to the phonenook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log("error",e),console.log(e.error),console.log(e.response),console.log(e.response.data.error),console.log(typeof e),E(e.response.data.error),setTimeout((function(){E(null)}),5e3)}));console.log(t)},hnc:function(e){p(e.target.value)},hnumc:function(e){v(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{persons:t,filter:P,deleteFunc:function(e){window.confirm("Delete ".concat(e.name,"?"))&&("id"in e?(l.deletePerson(e).then(o(t.filter((function(n){return n.name!==e.name})))),A("'".concat(e.name,"' has been deleted from phonebook")),setTimeout((function(){A(null)}),5e3)):l.getAll().then((function(n){l.deletePerson(n.data.find((function(n){return n.name===e.name}))).then((function(){o(t.filter((function(n){return n.name!==e.name}))),A("'".concat(e.name,"' has been deleted from phonebook")),setTimeout((function(){A(null)}),5e3)}))})))}})]})};t(39);c.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.154f3daa.chunk.js.map